<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load static %}
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/favicon/apple-touch-icon.png'%}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicon/favicon-32x32.png'%}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon/favicon-16x16.png'%}">
    <link rel="manifest" href="{% static 'images/favicon/site.webmanifest'%}">
    <title>Tickr - Signup</title>
    <link rel="stylesheet" href="{% static 'css/style.css'%}">
    <link rel="stylesheet" href="{% static 'css/form.css'%}">
</head>

<body>
    <div class="form_holder flex-center">
        <a href="{% url 'home' %}"><img class="logo_form-top" src="{% static 'images/logo.png'%}" alt="Tickr-logo"></a>
        <div class="form">
            <div class="form-header">
                <h1>Signup</h1>
            </div>
            <form  method="POST">
                {%csrf_token%}
                <div class="input_container">
                    <label for="username">Username</label><br>
                    <input class="form_input" type="text" name="username" id="username" placeholder="Username" required>
                    <span id="forusernamechecking">        
                    </span>
                    <span id="forusernamecheckinginp">
                        <input id="forusernamecheckinginput" type="text"value='3' hidden>        
                    </span>
                </div>
                <div class="input_container">
                    <label for="Firstname">First name</label><br>
                    <input class="form_input" type="text" name="firstname" id="firstname" placeholder="First name"
                        required>
                </div>
                <div class="input_container">
                    <label for="lastname">Last name</label><br>
                    <input class="form_input" type="text" name="lastname" id="lastname" placeholder="Last name">
                </div>
                <div class="input_container">
                    <label for="email">Email</label><br>
                    <input class="form_input" type="email" name="email" id="email" placeholder="Tickr@domain.com"
                        required>
                        <span id="foremailchecking">        
                        </span>
                        <span id="foremailcheckinginp"> 
   <input id="foremailcheckinginput" type="text"value='3' hidden>        
                        </span>
                </div>

                <div class="input_container">
                    <label for="password">Password</label><br>
                    <div class="pass_input-container flex-center"> <input class="form_input-pass" type="password"
                            name="password" id="password" placeholder="Password" required>
                        <div id='passeye'class="eye closed"></div>
                    </div>
                </div>
                <div class="input_container">
                    <label for="confirmpassword">Confirm Password</label><br>

                    <div class="pass_input-container flex-center"> <input class="form_input-pass" type="password"
                            name="confirmpassword" id="confirmpassword" placeholder="Confirm Password" required>
                        <div id='cpasseye'class="eye closed"></div>
                    </div>
                </div>
                <div id="regform">
                    {% if context == 'success' %}
                    <div class="message green">Registration successful!Check email to activate account. Redirecting to login page in <span id="reverse_counter">3</span>s.If not, <a href="{% url 'login' %}">click here.</a><script>
                        let counter = document.querySelector('#reverse_counter')
                        for (let i = 3; i > -1; i--) {
                            setTimeout(function (index) {
                                return function () {
                                    counter.innerHTML = `${index}`;
                                };
                            }(i), (3 - i) * 1000);}
                    </script>
                    </div>
                    <script>
                        setTimeout(function() {
                            window.location.href = "{% url 'login' %}"; 
                        }, 3000); 
                    </script>
                    {% endif %}
                </div>
                <div class="input_container">
                    <input type="button" class="btn-filled submit-btn blocked_btn" value="Signup">
                </div>


            </form>
            <div class="form_footer flex-center">
                <p>By signing up, you agree to Tickr's <a href="#">Terms and conditons</a>
               </div>

            <div class="below_form_footer flex-center">
             <p>Already a user? <a style="color: #04327c;" class="pointer" href="{% url 'login' %}">Login</a></p>
            </div>
            

        </div>
    </div>
<script src="{% static 'js/passviewer.js'%}"></script>
<script src="{% static 'js/registrationform.js'%}"></script>
<script src="{% static 'js/usernamechecksocket.js'%}"></script>
</body>

</html>