<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        {% load static %}
        <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/favicon/apple-touch-icon.png'%}">
        <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicon/favicon-32x32.png'%}">
        <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon/favicon-16x16.png'%}">
        <link rel="manifest" href="{% static 'images/favicon/site.webmanifest'%}">
        <title>Tickr - Reset Password</title>
        <link rel="stylesheet" href="{% static 'css/style.css'%}">
        <link rel="stylesheet" href="{% static 'css/form.css'%}">
    </head>
<body>
    <div class="form_holder flex-center">
        <a href="#"><img class="logo_form-top" src="logo.png" alt=""></a>
        <div class="form">
            <div class="form-header">
                <h1>Reset Password</h1>
            </div>
            <form method="POST">
                {%csrf_token%}
                <div class="input_container">
                    <label for="password">Password</label><br>
                    <div class="pass_input-container flex-center"> <input class="form_input-pass" type="password"
                            name="password" id="password" placeholder="Password" required>
                        <div id='passeye'class="eye closed"></div>
                    </div>
                </div>
                <div class="input_container">
                    <label for="confirmpassword">Confirm Password</label><br>

                    <div class="pass_input-container flex-center"> <input class="form_input-pass" type="password"
                            name="confirmpassword" id="confirmpassword" placeholder="Confirm Password" required>
                        <div id='cpasseye'class="eye closed"></div>
                    </div>
                </div>
                <div id="regform">
                    {% if context == 'done' %}
                    <div class="message green">Password changed.<a id="fatag" href="{% url 'login' %}"> Login again</a>
                    <script>
                        let regeform = document.querySelector('#regform')
                        setTimeout(function () {
                            regeform.innerHTML = ''
                        }, 3000); 
                        fatag = document.querySelector('#fatag')
                        asource = fatag.href
                        // Redirect to the login page after 3 seconds
                        setTimeout(function() {
                          window.location.href = `${asource}`;
                        }, 3000);          
                    </script>
                    {% elif context == 'wrong' %}
                    <div class="message red">Something went wrong<a style="width: 0px;" id="fatag" href="{% url 'forgotpassword' %}"></a>
                        <script>
                            let regeform = document.querySelector('#regform')
                            setTimeout(function () {
                                regeform.innerHTML = ''
                            }, 3000); 
                            atag = document.querySelector('#fatag')
                            asource = atag.href
                            // Redirect to the login page after 3 seconds
                            setTimeout(function() {
                              window.location.href = `${asource}`;
                            }, 3000);         
                        </script>
                    {% endif %}  
                </div>
                <div class="input_container">
                    <input type="submit" class="btn-filled submit-btn blocked_btn" value="Reset My Password">
                </div>


            </form>

        </div>
    </div>
    <script src="{% static 'js/passviewer.js'%}"></script>
    <script src="{% static 'js/resetpassword.js'%}"></script>

</body>

</html>